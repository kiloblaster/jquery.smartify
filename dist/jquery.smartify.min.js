/*! jQuery Smartify - v1.0.0-rc - 2016-02-22
* http://www.vinay-sharma.com/jquery-plugins/jquery.smartify
* Copyright (c) 2016 VINAY KUMAR SHARMA; Licensed MIT */
!function(a,b,c,d){var e=a(b),f=e,g=b.devicePixelRatio||1,h=null,i=console&&console.log?function(a){console.log(a)}:a.noop;a.fn.smartify=function(j){var k=this,l={threshold:0,limit_retry:0,event:"scroll",effect:"fadeIn",container:b,src_attr:"ng-src",skip_invisible:!0,placeholder:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",appear:a.noop,load:a.noop};a.extend(l,j||{}),g>1&&(h=l.src_attr+"-"+(g>2?"3x":g>1.5?"2x":"1-5x")),null===h&&(h=l.src_attr),f=l.container===d||l.container===b?e:a(l.container);var m=function(){var b=0;k.each(function(){var c=a(this);if(!l.skip_invisible||c.is(":visible"))if(a.above_the_top(this,l.threshold)||a.left_of_begin(this,l.threshold));else if(a.below_the_fold(this,l.threshold)||a.right_of_fold(this,l.threshold)){if(++b>l.limit_retry)return!1}else c.trigger("appear"),b=0})},n=function(){var b=a.grep(k,function(a){return!(a.loaded||a.no_src_attr)});k=a(b)},o=function(a){var b=a.data("toggle-class"),c=a.data("add-class"),d=a.data("remove-class");b&&a.toggleClass(b),d&&a.toggleClass(d),c&&a.toggleClass(c)},p=function(b,c,d){var e=a(b),f=a.trim(e.attr(c.src_attr));e.attr(h)&&(f=a.trim(e.attr(h))),a("<img />").bind("load",function(){e.hide(),e.attr("src",f),e[c.effect](c.effect_speed),b.loaded=!0,d(),c.load(b,k,c)}).attr("src",f)},q=function(b,c,d){var e=a(b),f=a.trim(e.attr(c.src_attr));e.attr(h)&&(f=a.trim(e.attr(h))),e.on("load",function(){e[c.effect](c.effect_speed),b.loaded=!0,d(),c.load(b,k,c)}).attr("src",f)},r=function(b,c,d){var e=a(b),f=e.attr("href"),g=e.data("do"),h=e.data("target");if("callback()"===h)return o(e),b.loaded=!0,void d();if("parent()"===h?h=e.parent():h&&(h=a(h)),h.is("iframe"))h.attr(c.src_attr,f),q(h.get(0),c,d),o(h);else if(h.is("img"))h.attr(c.src_attr,f),p(h.get(0),c,d),o(h);else{var i={method:"GET",url:f,data:{}};a.ajax(i).done(function(a){"append"===g?h.appendChild(a):h.html(a),h[c.effect](c.effect_speed),o(h),b.loaded=!0,d(),c.load(b,k,c,a)}).fail(function(a,d){c.load(b,k,c,a,d)})}};return 0===l.event.indexOf("scroll")&&f.bind(l.event,function(){return m()}),this.each(function(){var b=this,c=a(b);b.loaded=!1,b.no_src_attr=!1;var d=a.extend({},l),e=a.trim(c.attr("src"))||!1,f=a.trim(c.attr(d.src_attr))||!1,g=c.is("a"),h=c.is("img"),j=c.is("iframe");if(d.threshold=parseInt(a.trim(c.data("threshold"))||l.threshold),c.data("toggle-class")||c.data("add-class")||c.data("remove-class")){var m=d.load;d.load=function(a,b,d,e,f){m(a,b,d,e,f),o(c)}}return!h&&!j||e||c.attr("src",d.placeholder),!h&&!j||f?(c.one("appear",function(){this.loaded||(d.appear&&d.appear(b,k,d),h?p(b,d,n):g?c.data("target")?r(b,d,n):i('%cAn Anchor Tag must have defined data-target="" attribute to load response content in!',"color: #ff9900;"):j?q(b,d,n):(n(),d.load(b,k,d)))}),void(d.event.indexOf("scroll")&&c.bind(d.event,function(){b.loaded||c.trigger("appear")}))):(i("%cElement has no "+d.src_attr+" defined to load","color: #ff9900;"),b.no_src_attr=!0,void n())}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&e.bind("pageshow",function(b){b.originalEvent&&b.originalEvent.persisted&&k.each(function(){a(this).trigger("appear")})}),e.bind("resize",m),a(c).ready(m),this};var j=function(){return"function"==typeof f.scrollTop?f.scrollTop():f.offset().top},k=function(){return"function"==typeof f.scrollLeft?f.scrollLeft():f.offset().left};a.below_the_fold=function(b,c){return f.height()+j()<=a(b).offset().top-c},a.right_of_fold=function(b,c){return f.width()+k()<=a(b).offset().left-c},a.above_the_top=function(b,c){return j()>=a(b).offset().top+c+a(b).height()},a.left_of_begin=function(b,c){return k()>=a(b).offset().left+c+a(b).width()},a.visible_in_viewport=function(b,c){return!(a.right_of_fold(b,c)&&a.left_of_begin(b,c)&&a.below_the_fold(b,c)&&a.above_the_top(b,c))},a.extend(a.expr[":"],{"visible-in-viewport":function(b){return a.visible_in_viewport(b,0)},"below-the-fold":function(b){return a.below_the_fold(b,0)},"above-the-top":function(b){return!a.below_the_fold(b,0)},"right-of-screen":function(b){return a.right_of_fold(b,0)},"left-of-screen":function(b){return!a.right_of_fold(b,0)}})}(jQuery,window,document);